# 入门

## 安装 rustup

既是一个 rust 安装器又是一个版本管理工具.

```shell
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
rustup update # 更新
rustup self uninstall # 卸载
rustup doc # 离线文档
rustc --version

```

## 安装 cargo

rust 构建工具和包管理器.

```shell
cargo check   # 速检查代码确保其可以编译,并不产生可执行文件,编写代码时定期运行 cargo check 确保它们可以编译
cargo build   # 构建项目
cargo build --release # 优化编译项目,为用户构建最终程序
cargo run     # 编译并运行生成,先编译后运行,而不是 go run
cargo test    # 测试项目
cargo doc     # 为项目构建文档
cargo publish # 将库发布到 crates.io
cargo --version
```

## 创建项目

```shell
cargo new hello-rust
cargo run

Cargo.toml # 清单文件,包含了项目的元数据和依赖库.
src/main.rs # 编写应用代码的地方
```

## 安装依赖

```shell
# 编辑 Cargo.toml
[dependencies]
ferris-says = "0.2"

cargo build # 安装依赖

Cargo.lock # 记录了本地所用依赖库的精确版本
```

## 使用依赖

```rust
use ferris_says::say;
```

## 代码格式化

```shell
rustup component add rustfmt
cargo fmt
```

## 标准

```shell
rustup component add clippy
cargo clippy
cargo clippy --fix
```

## doc

[doc](https://docs.rs)

## 一个小应用

```rust
use ferris_says::say; // from the previous step
use std::io::{stdout, BufWriter};

fn main() {
    let stdout = stdout();
    let message = String::from("Hello fellow Rustaceans!");
    let width = message.chars().count();

    let mut writer = BufWriter::new(stdout.lock());
    say(message.as_bytes(), width, &mut writer).unwrap();
}
```

## 版本

1. stable : 稳定版
2. beat : 测试版
3. nightly : preview 版

## 内置函数

```rust
println!() // println! 调用了一个 Rust 宏（macro）.如果是调用函数,则应输入 println（没有!）.当看到符号 ! 的时候,就意味着调用的是宏而不是普通函数.
```

## 规范

1. 如果文件名包含多个单词,使用下划线分隔它们
2. Rust 的缩进风格使用 4 个空格
3. 大部分 Rust 代码行以分号结尾
4. 常量的命名规范是使用下划线分隔的大写字母单词

## 编译运行

1. 编译和运行是彼此独立的步骤
2. 使用 rustc 编译简单程序是没问题的,不过随着项目的增长,你可能需要管理你项目的方方面面,并让代码易于分享. Cargo 工具会帮你编写真实世界中的 Rust 程序

## Cargo 项目管理

构建代码、下载依赖库并编译这些库.

### Cargo.toml

```toml
[package]
name = "hello_cargo"
version = "0.1.0"
authors = ["Your Name <you@example.com>"]
edition = "2018"

[dependencies]
```

### Cargo.lock

永远也不要碰这个文件,让 Cargo 处理它就行.

## Q & A

[stackoverflow](https://stackoverflow.com/questions/tagged/rust)
